(this["webpackJsonpui-ngx"]=this["webpackJsonpui-ngx"]||[]).push([[7],{671:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return S}));var o,a=n(42),c=n(83),r=n(134),i=n(354),l=n(674),d=n.n(l),u=n(673),s=n.n(u),b=n(43),j=n(36),p=n(47),O=n(173),f=n(155),v=n(37),g=n(672),m=n(106),h=n(251),x=n(104),C=n(0),y=n(1);!function(e){e.BY_TITLE="name",e.BY_CREATED_TIME="createdTime"}(o||(o={}));var w=[new j.e(o.BY_TITLE,"regTemp.sortBy.name"),new j.e(o.BY_CREATED_TIME,"regTemp.sortBy.createdTime")];function S(e){var t=e.sortProp,n=e.onSortChange,o=e.textSearch,l=e.onSearchChange,u=e.deleteDisabled,j=e.deleteTitle,S=e.addTitle,k=e.selectTitle,R=e.showSelectBtn,T=void 0!==R&&R,E=e.selectMode,M=void 0!==E&&E,D=e.authControl,z=void 0===D?"GENERAL":D,B=e.menus||w,L=Object(x.b)(),A=Object(x.a)(),N="GENERAL"===z?A:!L,G=Object(b.c)(p.a),I={add:!T||!M,delete:(!T||M)&&e.onDelete,select:T&&!M,selectAll:T&&M&&e.viewMode===g.a.CARD,cancel:T&&M};return Object(y.jsxs)(a.a,{sx:{mb:2,display:"flex",justifyContent:"space-between",height:36},children:[M&&Object(y.jsxs)(a.a,{className:"flex-start",children:[Object(y.jsx)(c.a,{fontSize:16,color:h.c,children:e.selectedCount}),Object(y.jsx)(c.a,{sx:{ml:1},children:Object(v.b)("common.selected")})]}),!M&&Object(y.jsxs)(a.a,{className:"flex-start",children:[void 0!==e.viewMode&&Object(y.jsx)(g.b,{items:g.c,mode:e.viewMode,onChange:e.onViewModeChange}),G?null:Object(y.jsx)(f.a,{title:"regTemp.sortBy."+t,selected:t,menus:B,onMenuClick:n}),Object(y.jsx)(O.a,{sx:{ml:G?0:2,bgcolor:"#fff"},value:o,onChange:l})]}),N&&Object(y.jsx)(C.Fragment,{children:G?Object(y.jsxs)(a.a,{children:[Object(y.jsx)(i.a,{onClick:e.onAdd,size:"medium",edge:"start",color:"primary","aria-label":"open drawer",sx:{mr:1},children:Object(y.jsx)(s.a,{})}),Object(y.jsx)(i.a,{onClick:e.onDelete,disabled:u,size:"medium",edge:"start",color:"error","aria-label":"open drawer",children:Object(y.jsx)(d.a,{})})]}):Object(y.jsxs)(a.a,{children:[I.add&&Object(y.jsx)(r.a,{onClick:e.onAdd,variant:"contained",children:Object(v.b)(S)}),I.cancel&&Object(y.jsx)(r.a,{onClick:function(){e.selectAll(!1),e.setSelectMode(!1)},variant:"outlined",children:Object(v.b)("common.cancel")}),I.selectAll&&Object(y.jsx)(m.a,{sx:{ml:2},onClick:function(){e.selectAll&&e.selectAll(!0)},children:Object(v.b)("common.selectAll")}),I.select&&Object(y.jsx)(m.a,{sx:{ml:2},onClick:function(){var t;void 0!==t?e.setSelectMode(t):e.setSelectMode(!M)},children:Object(v.b)(k)}),I.delete&&Object(y.jsx)(r.a,{onClick:e.onDelete,disabled:u,sx:{ml:2},variant:void 0!==e.viewMode?"contained":"outlined",children:Object(v.b)(j)})]})})]})}},672:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return O}));var o,a=n(5),c=n(7),r=n(134),i=n(64),l=n(689),d=n(995),u=n(171),s=n(51),b=n(1),j=Object(c.a)(r.a)((function(e){var t=e.theme;return{height:36,borderColor:t.palette.action.disabled,"&:hover":{borderColor:t.palette.action.disabled},"&.checked":{backgroundColor:Object(i.a)(t.palette.primary.main,.32)},"&.checked:hover":{backgroundColor:Object(i.a)(t.palette.primary.main,.32)}}}));!function(e){e[e.LIST=0]="LIST",e[e.CARD=1]="CARD"}(o||(o={}));var p=[{icon:"ic_viewmodule",value:o.CARD,label:"common.cardView"},{icon:"ic_viewheadline",value:o.LIST,label:"common.listView"}];function O(e){var t=e.mode,n=e.onChange,o=e.items,c=void 0===o?[]:o,r=e.sx,i=void 0===r?{}:r,p=Object(u.a)().t;return Object(b.jsx)(l.a,{sx:Object(a.a)({mr:2},i),children:c.map((function(e){return Object(b.jsx)(d.a,{title:p(e.label),children:Object(b.jsx)(j,{size:"small",onClick:function(){var o;(o=e.value)!==t&&n(o)},className:t===e.value?"checked":"",sx:{px:1},children:Object(b.jsx)(s.a,{color:"rgba(0, 0, 0, 0.54)",mr:0,icon:e.icon})})},e.label)}))})}},673:function(e,t,n){"use strict";var o=n(254);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(255)),c=n(1),r=(0,a.default)((0,c.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");t.default=r},674:function(e,t,n){"use strict";var o=n(254);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(255)),c=n(1),r=(0,a.default)((0,c.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.default=r},682:function(e,t,n){"use strict";var o=n(7),a=n(656),c=n(64),r=Object(o.a)(a.a)((function(e){var t=e.theme;return{backgroundColor:Object(c.a)(t.palette.primary.main,.08),color:t.palette.primary.main,fontSize:14,paddingRight:6}}));t.a=r},684:function(e,t,n){"use strict";var o=n(7),a=n(740),c=Object(o.a)(a.a)((function(){return{cursor:"pointer"}}));t.a=c},689:function(e,t,n){"use strict";var o=n(3),a=n(4),c=n(2),r=n(0),i=n(8),l=n(152),d=n(64),u=n(10),s=n(7),b=n(16),j=n(92),p=n(103);function O(e){return Object(j.a)("MuiButtonGroup",e)}var f=Object(p.a)("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary"]),v=n(257),g=n(1),m=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],h=Object(s.a)("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[Object(o.a)({},"& .".concat(f.grouped),t.grouped),Object(o.a)({},"& .".concat(f.grouped),t["grouped".concat(Object(u.a)(n.orientation))]),Object(o.a)({},"& .".concat(f.grouped),t["grouped".concat(Object(u.a)(n.variant))]),Object(o.a)({},"& .".concat(f.grouped),t["grouped".concat(Object(u.a)(n.variant)).concat(Object(u.a)(n.orientation))]),Object(o.a)({},"& .".concat(f.grouped),t["grouped".concat(Object(u.a)(n.variant)).concat(Object(u.a)(n.color))]),t.root,t[n.variant],!0===n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth,"vertical"===n.orientation&&t.vertical]}})((function(e){var t=e.theme,n=e.ownerState;return Object(c.a)({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},"contained"===n.variant&&{boxShadow:(t.vars||t).shadows[2]},n.disableElevation&&{boxShadow:"none"},n.fullWidth&&{width:"100%"},"vertical"===n.orientation&&{flexDirection:"column"},Object(o.a)({},"& .".concat(f.grouped),Object(c.a)({minWidth:40,"&:not(:first-of-type)":Object(c.a)({},"horizontal"===n.orientation&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},"vertical"===n.orientation&&{borderTopRightRadius:0,borderTopLeftRadius:0},"outlined"===n.variant&&"horizontal"===n.orientation&&{marginLeft:-1},"outlined"===n.variant&&"vertical"===n.orientation&&{marginTop:-1}),"&:not(:last-of-type)":Object(c.a)({},"horizontal"===n.orientation&&{borderTopRightRadius:0,borderBottomRightRadius:0},"vertical"===n.orientation&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},"text"===n.variant&&"horizontal"===n.orientation&&{borderRight:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"vertical"===n.orientation&&{borderBottom:t.vars?"1px solid rgba(".concat(t.vars.palette.common.onBackgroundChannel," / 0.23)"):"1px solid ".concat("light"===t.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"text"===n.variant&&"inherit"!==n.color&&{borderColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / 0.5)"):Object(d.a)(t.palette[n.color].main,.5)},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"transparent"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"transparent"},"contained"===n.variant&&"horizontal"===n.orientation&&Object(o.a)({borderRight:"1px solid ".concat((t.vars||t).palette.grey[400])},"&.".concat(f.disabled),{borderRight:"1px solid ".concat((t.vars||t).palette.action.disabled)}),"contained"===n.variant&&"vertical"===n.orientation&&Object(o.a)({borderBottom:"1px solid ".concat((t.vars||t).palette.grey[400])},"&.".concat(f.disabled),{borderBottom:"1px solid ".concat((t.vars||t).palette.action.disabled)}),"contained"===n.variant&&"inherit"!==n.color&&{borderColor:(t.vars||t).palette[n.color].dark},{"&:hover":Object(c.a)({},"outlined"===n.variant&&"horizontal"===n.orientation&&{borderRightColor:"currentColor"},"outlined"===n.variant&&"vertical"===n.orientation&&{borderBottomColor:"currentColor"})}),"&:hover":Object(c.a)({},"contained"===n.variant&&{boxShadow:"none"})},"contained"===n.variant&&{boxShadow:"none"})))})),x=r.forwardRef((function(e,t){var n=Object(b.a)({props:e,name:"MuiButtonGroup"}),o=n.children,d=n.className,s=n.color,j=void 0===s?"primary":s,p=n.component,f=void 0===p?"div":p,x=n.disabled,C=void 0!==x&&x,y=n.disableElevation,w=void 0!==y&&y,S=n.disableFocusRipple,k=void 0!==S&&S,R=n.disableRipple,T=void 0!==R&&R,E=n.fullWidth,M=void 0!==E&&E,D=n.orientation,z=void 0===D?"horizontal":D,B=n.size,L=void 0===B?"medium":B,A=n.variant,N=void 0===A?"outlined":A,G=Object(a.a)(n,m),I=Object(c.a)({},n,{color:j,component:f,disabled:C,disableElevation:w,disableFocusRipple:k,disableRipple:T,fullWidth:M,orientation:z,size:L,variant:N}),F=function(e){var t=e.classes,n=e.color,o=e.disabled,a=e.disableElevation,c=e.fullWidth,r=e.orientation,i=e.variant,d={root:["root",i,"vertical"===r&&"vertical",c&&"fullWidth",a&&"disableElevation"],grouped:["grouped","grouped".concat(Object(u.a)(r)),"grouped".concat(Object(u.a)(i)),"grouped".concat(Object(u.a)(i)).concat(Object(u.a)(r)),"grouped".concat(Object(u.a)(i)).concat(Object(u.a)(n)),o&&"disabled"]};return Object(l.a)(d,O,t)}(I),V=r.useMemo((function(){return{className:F.grouped,color:j,disabled:C,disableElevation:w,disableFocusRipple:k,disableRipple:T,fullWidth:M,size:L,variant:N}}),[j,C,w,k,T,M,L,N,F.grouped]);return Object(g.jsx)(h,Object(c.a)({as:f,role:"group",className:Object(i.a)(F.root,d),ref:t,ownerState:I},G,{children:Object(g.jsx)(v.a.Provider,{value:V,children:o})}))}));t.a=x},718:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(6),a=n(259),c=n.n(a),r=n(0);function i(e){var t=Object(r.useState)(),n=Object(o.a)(t,2),a=n[0],i=n[1],l=Object(r.useState)(),d=Object(o.a)(l,2),u=d[0],s=d[1];Object(r.useEffect)((function(){var t=document.getElementById(e.id),n=[t.clientWidth,t.clientHeight];s({width:n[0],height:n[1]})}),[e.id]),Object(r.useEffect)((function(){if(!a){var t=function(e){var t=e.id,n=e.center,o=void 0===n?[30.636088,.990693]:n,a=e.zoom,r=void 0===a?2:a,i=e.minZoom,l=void 0===i?2:i,d=c.a.map(t).setView(o,r);return c.a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:18,minZoom:l}).addTo(d),d.setMaxBounds(c.a.latLngBounds(c.a.latLng(-90,-360),c.a.latLng(90,360))),d}(e);i(t)}}),[a,e]);var b=Object(r.useCallback)((function(e){var t=c.a.markerClusterGroup();t.addLayers(e),null===a||void 0===a||a.addLayer(t)}),[a]),j=Object(r.useCallback)((function(e){if(!e)return null;var t=Object(o.a)(e,2),n=t[0],a=t[1];return"[".concat(n.toFixed(6),", ").concat(a.toFixed(6),"]")}),[]),p=Object(r.useCallback)((function(e){if(!e||!u)return{display:"none"};var t=e.x,n=e.y,o=u.height;return n>=o-40&&(n=o-40),{display:"block",top:n+15+"px",left:t+15+"px"}}),[u]);return{map:a,clustMarker:b,getMapInforTextFromLatlng:j,getInforStyle:p}}},738:function(e,t,n){"use strict";var o=n(13),a=n(14),c=n(18),r=n(30),i=n(31),l=n(17),d=n(12),u=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e,o,r,i,u,s,b,j,p,O,f;Object(a.a)(this,n);for(var v=arguments.length,g=new Array(v),m=0;m<v;m++)g[m]=arguments[m];return(f=t.call.apply(t,[this].concat(g))).search=function(t){return Object(l.a)((e=Object(c.a)(f),Object(d.a)(n.prototype)),"get",e).call(e,"https://nominatim.openstreetmap.org/search?format=json&q="+t)},f.searchReverse=function(e){return Object(l.a)((o=Object(c.a)(f),Object(d.a)(n.prototype)),"get",o).call(o,"https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e[0],"&lon=").concat(e[1]))},f.createGeofence=function(e){return Object(l.a)((r=Object(c.a)(f),Object(d.a)(n.prototype)),"post",r).call(r,"/api/geofencing/create",e)},f.updateGeofence=function(e){return Object(l.a)((i=Object(c.a)(f),Object(d.a)(n.prototype)),"put",i).call(i,"/api/geofencing",e)},f.deleteGeofence=function(e){return Object(l.a)((u=Object(c.a)(f),Object(d.a)(n.prototype)),"post",u).call(u,"/api/geofencing/delete",e)},f.getGeofenceList=function(e){return Object(l.a)((s=Object(c.a)(f),Object(d.a)(n.prototype)),"get",s).call(s,"/api/geofencing",{params:e})},f.getGeofenceDetail=function(e){return Object(l.a)((b=Object(c.a)(f),Object(d.a)(n.prototype)),"get",b).call(b,"/api/geofencing/"+e)},f.getDevicesOfGeofence=function(e,t){return Object(l.a)((j=Object(c.a)(f),Object(d.a)(n.prototype)),"get",j).call(j,"/api/geofencing/".concat(e,"/devices"),{params:t})},f.getDeviceLocationsOfGeofence=function(e,t){return Object(l.a)((p=Object(c.a)(f),Object(d.a)(n.prototype)),"get",p).call(p,"/api/geofencing/".concat(e,"/deviceLocations"),{params:t})},f.getDeviceGeofenceDetail=function(e){return Object(l.a)((O=Object(c.a)(f),Object(d.a)(n.prototype)),"get",O).call(O,"/api/geofencing/device/".concat(e))},f}return Object(o.a)(n)}(n(107).a),s=new u;t.a=s},740:function(e,t,n){"use strict";var o=n(23),a=n(6),c=n(3),r=n(4),i=n(2),l=n(0),d=n(8),u=n(152),s=n(10),b=n(7),j=n(16),p=n(177),O=n(41),f=n(83),v=n(92),g=n(103);function m(e){return Object(v.a)("MuiLink",e)}var h=Object(g.a)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),x=n(22),C=n(64),y={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},w=function(e){var t=e.theme,n=e.ownerState,o=function(e){return y[e]||e}(n.color),a=Object(x.b)(t,"palette.".concat(o),!1)||n.color,c=Object(x.b)(t,"palette.".concat(o,"Channel"));return"vars"in t&&c?"rgba(".concat(c," / 0.4)"):Object(C.a)(a,.4)},S=n(1),k=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],R=Object(b.a)(f.a,{name:"MuiLink",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["underline".concat(Object(s.a)(n.underline))],"button"===n.component&&t.button]}})((function(e){var t=e.theme,n=e.ownerState;return Object(i.a)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&Object(i.a)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:w({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&Object(c.a)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(h.focusVisible),{outline:"auto"}))})),T=l.forwardRef((function(e,t){var n=Object(j.a)({props:e,name:"MuiLink"}),c=n.className,b=n.color,f=void 0===b?"primary":b,v=n.component,g=void 0===v?"a":v,h=n.onBlur,x=n.onFocus,C=n.TypographyClasses,w=n.underline,T=void 0===w?"always":w,E=n.variant,M=void 0===E?"inherit":E,D=n.sx,z=Object(r.a)(n,k),B=Object(p.a)(),L=B.isFocusVisibleRef,A=B.onBlur,N=B.onFocus,G=B.ref,I=l.useState(!1),F=Object(a.a)(I,2),V=F[0],_=F[1],W=Object(O.a)(t,G),H=Object(i.a)({},n,{color:f,component:g,focusVisible:V,underline:T,variant:M}),P=function(e){var t=e.classes,n=e.component,o=e.focusVisible,a=e.underline,c={root:["root","underline".concat(Object(s.a)(a)),"button"===n&&"button",o&&"focusVisible"]};return Object(u.a)(c,m,t)}(H);return Object(S.jsx)(R,Object(i.a)({color:f,className:Object(d.a)(P.root,c),classes:C,component:g,onBlur:function(e){A(e),!1===L.current&&_(!1),h&&h(e)},onFocus:function(e){N(e),!0===L.current&&_(!0),x&&x(e)},ref:W,ownerState:H,variant:M,sx:[].concat(Object(o.a)(Object.keys(y).includes(f)?[]:[{color:f}]),Object(o.a)(Array.isArray(D)?D:[D]))},z))}));t.a=T},791:function(e,t,n){"use strict";var o=n(2),a=n(4),c=n(0),r=n(8),i=n(152),l=n(7),d=n(16),u=n(351),s=n(92),b=n(103);function j(e){return Object(s.a)("MuiCard",e)}Object(b.a)("MuiCard",["root"]);var p=n(1),O=["className","raised"],f=Object(l.a)(u.a,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),v=c.forwardRef((function(e,t){var n=Object(d.a)({props:e,name:"MuiCard"}),c=n.className,l=n.raised,u=void 0!==l&&l,s=Object(a.a)(n,O),b=Object(o.a)({},n,{raised:u}),v=function(e){var t=e.classes;return Object(i.a)({root:["root"]},j,t)}(b);return Object(p.jsx)(f,Object(o.a)({className:Object(r.a)(v.root,c),elevation:u?8:void 0,ref:t,ownerState:b},s))}));t.a=v},885:function(e,t,n){"use strict";n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return w}));var o=n(64),a=n(791),c=n(42),r=n(83),i=n(550),l=n(217),d=n(259),u=n(0),s=n(171),b=n(43),j=n(104),p=n(718),O=n(938),f=n(47),v=n(24),g=n(105),m=n(684),h=n(51),x=n(1),C=Object(l.a)((function(){return{container:{position:"relative","&:hover":{"& .icon-container":{display:"block"}}},icon:{display:"none",position:"absolute",right:-5,top:2,zIndex:401,cursor:"pointer"}}})),y=function(e){return e>8e3?9:e>5e3?10:e>1e3?11:12};function w(e){var t=e.selected?function(e){return Object(o.a)(e.palette.primary.main,.06)}:"#fff",n=Object(b.c)(f.l),l=e.detail,w=l.id,S=l.latitude,k=l.longitude,R=l.radius,T=l.name,E=Object(u.useMemo)((function(){return[S,k]}),[S,k]),M=Object(p.a)({id:w,center:E,zoom:y(R)}).map,D=Object(j.b)(),z=Object(s.a)().t,B=C();Object(u.useEffect)((function(){M&&Object(d.circle)(E,{fillColor:n,radius:R,color:n}).addTo(M)}),[M,R,E,n]);return Object(x.jsxs)(a.a,{className:B.container,sx:{boxShadow:v.g,bgcolor:t},children:[Object(x.jsx)("span",{className:B.icon+" icon-container",children:Object(x.jsx)(h.a,{icon:"fullscreen",onClick:function(){var e=document.getElementById(w);null===e||void 0===e||e.requestFullscreen()}})}),Object(x.jsx)(c.a,{sx:{height:120},id:w}),Object(x.jsxs)(c.a,{sx:{p:2,pb:1},children:[Object(x.jsxs)(c.a,{className:"flex-between",children:[Object(x.jsx)(r.a,{children:T}),!D&&Object(x.jsx)(g.a,{menus:O.GeofenceMenus,onMenuClick:function(t){return e.onMenuClick(t,e.detail)}})]}),Object(x.jsxs)(c.a,{children:[Object(x.jsx)(r.a,{lineHeight:1.4,variant:"subtitle1",children:z("geofence.cardDisplay.latitude",{data:S.toFixed(7)})}),Object(x.jsx)(r.a,{lineHeight:1.4,variant:"subtitle1",children:z("geofence.cardDisplay.longitude",{data:k.toFixed(7)})}),Object(x.jsx)(r.a,{lineHeight:1.4,variant:"subtitle1",children:z("geofence.cardDisplay.radius",{data:R})})]})]}),Object(x.jsx)(i.a,{}),Object(x.jsx)(c.a,{className:"flex pointer",onClick:function(){return e.viewDetail(l)},sx:{py:1.5,"&:hover":{bgcolor:function(e){return Object(o.a)(e.palette.primary.main,.1)}}},children:Object(x.jsx)(m.a,{variant:"subtitle1",underline:"none",children:z("device.constants.VIEW_DETAIL")})})]})}},938:function(e,t,n){"use strict";n.r(t),n.d(t,"GeofencePageActions",(function(){return o})),n.d(t,"GeofenceMenus",(function(){return D}));var o,a=n(23),c=n(5),r=n(6),i=n(42),l=n(64),d=n(655),u=n(43),s=n(45),b=n(36),j=n(138),p=n(0),O=n(105),f=n(24),v=n(26),g=n(37),m=n(672),h=n(139),x=n(671),C=n(174),y=n(104),w=n(885),S=n(738),k=n(684),R=n(682),T=n(250),E=n(78),M=n(1);!function(e){e.DELETE="actions.delete"}(o||(o={}));var D=[new b.e(o.DELETE,"common.delete","ic_delete")],z={xs:12,md:6,lg:4,xl:3},B=!1,L=!0;t.default=function(){var e=Object(u.c)((function(e){return e.config})),t=Object(v.m)(),n=Object(p.useState)([]),b=Object(r.a)(n,2),A=b[0],N=b[1],G=Object(p.useState)(new j.d(0,15,void 0,x.a.BY_CREATED_TIME,"desc")),I=Object(r.a)(G,2),F=I[0],V=I[1],_=Object(p.useState)(!1),W=Object(r.a)(_,2),H=W[0],P=W[1],Y=Object(p.useState)(null),Z=Object(r.a)(Y,2),q=Z[0],J=Z[1],U=Object(p.useState)([]),K=Object(r.a)(U,2),Q=K[0],X=K[1],$=Object(p.useState)(m.a.CARD),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],oe=Object(y.b)(),ae=Object(p.useCallback)((function(){var e;P(!0),B=!0,(e=F,S.a.getGeofenceList(e)).then((function(e){te===m.a.LIST?(J(e),X(e.content),P(!1)):(J(Object(c.a)(Object(c.a)({},e),{},{content:((null===q||void 0===q?void 0:q.content)||[]).concat(e.content)})),P(!1),X(Q.concat(e.content))),L=!(null!==e&&void 0!==e&&e.last),B=!1}))}),[F,te]);Object(p.useEffect)((function(){ae()}),[ae]);var ce=Object(p.useCallback)((function(e){var t=e.target,n=t.scrollTop;t.scrollHeight-n<=t.clientHeight&&!B&&L&&(B=!0,V(Object(c.a)(Object(c.a)({},F),{},{page:F.page+1})))}),[F]);Object(p.useEffect)((function(){var e=document.getElementById("register-template-container");e&&(e.onscroll=ce)}),[te,ce]);var re=Object(p.useCallback)((function(){X([]),0!==F.page?V(Object(c.a)(Object(c.a)({},F),{},{page:0})):(V(Object(c.a)(Object(c.a)({},F),{},{page:0})),ae())}),[ae,F]),ie=e.height,le=Object(p.useCallback)((function(e){var t=new T.a([],[],new E.s(E.i.CLOSE_GEOFENCING,new E.t("devices-and-groups",null,null),E.i.CLOSE_GEOFENCING,e,e.name),{},e.id),n=S.a.deleteGeofence({userOperationTask:t,id:e.id});return n.then((function(){f.c.success("common.deleteSuccessed"),re()})).catch((function(){f.c.error("common.deleteFailed")})),n}),[re]),de=Object(p.useCallback)((function(e){Object(f.a)({title:Object(g.b)("geofence.deleteTitle",{name:e.name}),content:Object(g.b)("common.deleteContent"),okBtnColor:"error",okText:"common.delete",onOk:function(){return le(e)}})}),[le]),ue=Object(p.useCallback)((function(e,t){if(console.log("action",e,t),e===o.DELETE)de(t)}),[de]),se=function(e,t){A.find((function(e){return e.id===t.id}))?N(A.filter((function(e){return e.id!==t.id}))):N([].concat(Object(a.a)(A),[t]))},be=Object(p.useCallback)((function(e){var t=S.a.updateGeofence(e);return t.then((function(e){ae()})),t}),[ae]),je=Object(p.useCallback)((function(e){t("/geofence/"+e.id)}),[t]),pe=Object(p.useMemo)((function(){var e=[new s.d("nameCircle","common.name","left",null,(function(e){return Object(M.jsx)(i.a,{sx:{px:2,flexWrap:"nowrap"},className:"flex-start",children:Object(M.jsx)(k.a,{onClick:function(){return je(e)},children:e.name})})}),!0),new s.c(be),new s.a("deviceCount","dashboard.deviceNum",void 0,(function(e){return Object(g.b)("geofence.deviceUnit",{count:e.deviceCount||0})})),new s.a("radius","geofence.radius",null,(function(e){return Object(g.b)("geofence.radiusUnit",{data:e.radius})})),new s.d("command","geofence.command",void 0,void 0,(function(e){var t=e.operation,n=t.lockDevice,o=t.alarm;return n||o?Object(M.jsxs)(i.a,{sx:{pl:2},children:[n&&Object(M.jsx)(R.a,{sx:{pr:0,mr:1,bgcolor:function(e){return Object(l.a)(e.palette.info.main,.08)},color:function(e){return e.palette.info.main}},label:Object(g.b)("geofence.lockDevice"),size:"small"}),n&&Object(M.jsx)(R.a,{sx:{pr:0,mr:1,bgcolor:function(e){return Object(l.a)(e.palette.warning.main,.08)},color:function(e){return e.palette.warning.main}},label:Object(g.b)("geofence.alarm"),size:"small"})]}):null})),new s.b("createdTime","common.createdTime")];return oe||e.push(new s.d("operation","device.operation","right",72,(function(e){return Object(M.jsx)(i.a,{children:Object(M.jsx)(O.a,{menus:D,onMenuClick:function(t){return ue(t,e)}})})}),!0)),e}),[ue,be,oe,je]),Oe=Object(M.jsx)(C.a,{type:"geofence",emptyTitle:"geofence.emptyTitle"});return Object(M.jsxs)(i.a,{sx:{height:1},className:"content-container",children:[Object(M.jsx)(x.b,{sortProp:F.sortProperty,onSortChange:function(e){e!==F.sortProperty&&(X([]),V(Object(c.a)(Object(c.a)({},F),{},{sortProperty:e,page:0})))},textSearch:F.textSearch,onSearchChange:function(e){X([]),V(Object(c.a)(Object(c.a)({},F),{},{page:0,textSearch:e}))},deleteDisabled:(null===A||void 0===A?void 0:A.length)<=0,onAdd:function(){t("/geofence/create")},viewMode:te,onViewModeChange:function(e){ne(e),J(null),X([]),N([]),V(Object(c.a)(Object(c.a)({},F),{},{page:0}))},selectAll:function(e){N(e?null===q||void 0===q?void 0:q.content:[])},addTitle:"geofence.createGeofence",selectedCount:null===A||void 0===A?void 0:A.length}),Object(M.jsxs)(i.a,{sx:{height:"calc(100% - 56px)",bgcolor:"#fff",borderRadius:1},children:[te===m.a.LIST&&Object(M.jsx)(s.g,{page:F.page,onCheckedChange:function(e,t){N(e?A.concat(t):A.filter((function(e){return e.id!==t.id})))},selected:A,onSelectChange:N,rows:null===q||void 0===q?void 0:q.content,totalPages:null===q||void 0===q?void 0:q.totalPages,pageSize:15,columns:pe,loading:H,pageChange:function(e){V(Object(c.a)(Object(c.a)({},F),{},{page:e}))},height:ie-245,children:Oe}),te===m.a.CARD&&Object(M.jsx)(i.a,{id:"register-template-container",sx:{height:1,py:3,px:{sm:4.5,lg:7},overflow:"auto",boxSizing:"border-box"},children:Object(M.jsxs)(h.a,{size:"small",title:null,loading:H,sx:{},children:[(null===Q||void 0===Q?void 0:Q.length)>0&&Object(M.jsx)(d.a,{container:!0,spacing:3,children:null===Q||void 0===Q?void 0:Q.map((function(e){return Object(M.jsx)(d.a,Object(c.a)(Object(c.a)({},z),{},{item:!0,children:Object(M.jsx)(w.a,{selected:Boolean(A.find((function(t){return t.id===e.id}))),onSelectChange:function(t){return se(0,e)},detail:e,viewDetail:je,onMenuClick:ue})}),e.id)}))}),!H&&Q.length<=0&&Oe]})})]})]})}}}]);