(this["webpackJsonpui-ngx"]=this["webpackJsonpui-ngx"]||[]).push([[37],{799:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var a=i(6),c=i(754),n=i(887),l=i(974),r=i(969),s=i(967),o=i(950),j=i(965),b=i(973),u=i(959),d=i(985),x=i(958),h=i(1005),O=i(978),p=i(970),v=i(0),f=i(47),m=i(43);function g(e){var t=Object(v.useState)(),i=Object(a.a)(t,2),c=i[0],l=i[1],r=Object(m.c)(f.p),s=Object(m.c)(f.g),o=Object(m.c)(f.e),j=Object(v.useCallback)((function(){arguments.length>0&&void 0!==arguments[0]||e.id;var t=document.getElementById(e.id);if(t){var i=n.b(t);e.option&&i.setOption(e.option),l(i)}}),[e]);Object(v.useEffect)((function(){(null===c||void 0===c?void 0:c.resize)&&(null===c||void 0===c||c.resize())}),[r,s,c]),Object(v.useEffect)((function(){setTimeout((function(){(null===c||void 0===c?void 0:c.resize)&&(null===c||void 0===c||c.resize())}),400)}),[o,c]),Object(v.useEffect)((function(){j()}),[j]);var b=Object(v.useCallback)((function(e){c&&e&&c.setOption(e)}),[c]),u=Object(v.useCallback)((function(e){j(e)}),[j]);return{chart:c,setOption:b,setId:u}}c.a([o.a,j.a,b.a,u.a,d.a,l.a,r.a,s.a,h.a,O.a,p.a,x.a])},983:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return J}));var a=i(5),c=i(6),n=i(59),l=i(42),r=i(655),s=i(995),o=i(792),j=i(64),b=i(83),u=i(217),d=i(0),x=i(171),h=i(160),O=i(104),p=i(141),v=i(24),f=i(1);function m(e){var t=Object(x.a)().t,i=e.title,c=e.sx,n=void 0===c?{}:c,r=e.children,s=Object(d.useMemo)((function(){return e.title?"calc(100% - 56px)":"100%"}),[e]);return Object(f.jsxs)(l.a,{className:"border-box",sx:Object(a.a)({boxShadow:v.g,borderRadius:1,height:1},n),children:[i&&Object(f.jsxs)(l.a,{sx:{height:56,px:4},className:"flex-start",children:[Object(f.jsx)(l.a,{sx:{mr:1,width:3,height:12,bgcolor:v.x}}),"string"===typeof i&&Object(f.jsx)(b.a,{children:t(i)}),"object"===typeof i&&i]}),Object(f.jsx)(l.a,{sx:{height:s},children:r})]})}var g=i(139),N=i(175),S=i(51),y=i(799),w="license-device-statistics";function z(e){var t=Object(y.a)({id:w}),i=Object(x.a)().t,a=Object(n.a)(),c=e.deviceLicenseInfo,r=Object(d.useMemo)((function(){return["{a|".concat(null===c||void 0===c?void 0:c.totalNum,"}"),"{c| }","{b|".concat(i("license.total"),"}")].join("\n")}),[i,null===c||void 0===c?void 0:c.totalNum]),s=Object(d.useMemo)((function(){return c?{tooltip:{trigger:"item",formatter:function(e){console.log(e);var t=JSON.parse(e.name),a=t.label,c=t.value;return"<p style=''>".concat(i("license."+a),' <span style="font-weight: bold; padding-left: 16px">').concat(c,"</span></p>")}},legend:{left:"45%",top:"20%",orient:"vertical",itemWidth:16,itemHeight:16,itemGap:24,formatter:function(e){var t=JSON.parse(e),a=t.label,c=t.value;return i("license."+a)+"    "+c}},series:[{center:["25%","45%"],type:"pie",radius:["48%","68%"],avoidLabelOverlap:!1,label:{show:!1,fontSize:40,position:"center",formatter:r,rich:{a:{fontSize:16,marginBottom:0},b:{fontSize:14,color:"#00000099"},c:{fontSize:16}}},labelLine:{show:!1},data:[{name:JSON.stringify({label:"freeLicense",value:100}),value:100,itemStyle:{color:a.palette.success.light}},{name:JSON.stringify({label:"activatedLicense",value:Number(null===c||void 0===c?void 0:c.activedNum)||0}),value:Number(null===c||void 0===c?void 0:c.activedNum)||0,itemStyle:{color:a.palette.info.light}},{name:JSON.stringify({label:"unactivatedLicense",value:(null===c||void 0===c?void 0:c.unauthorizedNum)||0}),value:(null===c||void 0===c?void 0:c.unauthorizedNum)||0,itemStyle:{color:a.palette.action.disabled}}]}]}:null}),[r,i,c,a]);return Object(d.useEffect)((function(){t.setOption(s)}),[s,t]),Object(f.jsx)(l.a,{sx:{height:224},id:w})}var C=i(322);function L(e){return Object(f.jsx)(l.a,{sx:{mt:3},children:Object(f.jsx)(C.a,{afterFileUpload:e.afterFileUpload})})}var T={xs:12,lg:12,xl:6},k={xs:12,lg:12,xl:6},E=Object(u.a)((function(e){return{rightTop:{right:-1,top:-1,border:"12px solid",borderLeftColor:"transparent",borderBottomColor:"transparent"},point:{width:8,height:8,borderRadius:"50%",marginRight:e.spacing(1),backgroundColor:e.palette.success.light}}}));function J(){var e=Object(x.a)().t,t=Object(O.c)(),i=Object(d.useState)(),u=Object(c.a)(i,2),y=u[0],w=u[1],C=Object(d.useState)(!0),J=Object(c.a)(C,2),M=J[0],R=J[1],A=Object(n.a)(),I=E(),_=Object(d.useCallback)((function(){R(!0);var e=h.a.getTenantLicenseDetail();e.then((function(e){return w(e)})),Promise.all([e]).finally((function(){return R(!1)}))}),[]);return Object(d.useEffect)((function(){_()}),[_]),t?Object(f.jsxs)(N.a,{containerFullHeight:!0,containerMargin:!1,fullHeight:!0,title:"user.userMenus.LICENSE",children:[M&&Object(f.jsx)(g.a,{}),!M&&Object(f.jsxs)(l.a,{sx:{px:1,pb:2},children:[Object(f.jsx)(l.a,{sx:{},children:Object(f.jsxs)(r.a,{container:!0,spacing:3,children:[Object(f.jsx)(r.a,Object(a.a)(Object(a.a)({item:!0},T),{},{children:Object(f.jsx)(m,{sx:{height:280},title:"license.licenseActivation",children:y&&Object(f.jsx)(z,{deviceLicenseInfo:y})})})),Object(f.jsx)(r.a,Object(a.a)(Object(a.a)({item:!0},T),{},{children:Object(f.jsxs)(r.a,{container:!0,spacing:3,children:[Object(f.jsx)(r.a,{item:!0,xs:12,children:Object(f.jsx)(m,{sx:{height:142},title:Object(f.jsxs)(l.a,{className:"flex-start",children:[Object(f.jsx)(b.a,{sx:{mr:1},children:e("license.deviceAuthUsage")}),Object(f.jsx)(s.a,{title:e("license.freeDeviceTip"),children:Object(f.jsx)(l.a,{children:Object(f.jsx)(S.a,{color:A.palette.warning.light,fontSize:16,icon:"ic_alert"})})})]}),children:Object(f.jsxs)(l.a,{sx:{px:4,height:1},children:[Object(f.jsx)(o.a,{variant:"determinate",value:(null===y||void 0===y?void 0:y.deviceNum)/(null===y||void 0===y?void 0:y.totalNum)*100,color:"primary",sx:{height:12,borderRadius:3,mt:1}}),Object(f.jsxs)(l.a,{className:"flex-start",sx:{mt:2},children:[Object(f.jsx)(l.a,{sx:{bgcolor:v.x},className:I.point}),Object(f.jsx)(b.a,{sx:{mr:1},variant:"subtitle1",children:e("license.usedAuth")}),Object(f.jsx)(b.a,{sx:{mr:8},children:null===y||void 0===y?void 0:y.deviceNum}),Object(f.jsx)(l.a,{sx:{bgcolor:Object(j.a)(A.palette.primary.main,.3)},className:I.point}),Object(f.jsxs)(l.a,{className:"flex-start",children:[Object(f.jsx)(b.a,{sx:{mr:1},variant:"subtitle1",children:e("license.availableAuth")}),Object(f.jsx)(l.a,{sx:{mt:"-2px"},className:"flex-start",children:Object(f.jsx)(b.a,{color:A.palette.info.main,children:(null===y||void 0===y?void 0:y.availableNum)||0})})]})]})]})})}),Object(f.jsx)(r.a,Object(a.a)(Object(a.a)({item:!0},k),{},{children:Object(f.jsxs)(m,{title:"license.expiringSoon",sx:{height:114,position:"relative"},children:[Object(f.jsx)(l.a,{className:I.rightTop+" abs-position",sx:{borderTopColor:A.palette.error.light,borderRightColor:A.palette.error.light}}),Object(f.jsxs)(l.a,{sx:{pl:4,pr:3},className:"flex-between",children:[Object(f.jsx)(b.a,{variant:"h3",children:null===y||void 0===y?void 0:y.expiringSoon}),Object(f.jsx)(S.a,{style:{opacity:.2,marginTop:-12},icon:"ic_waiting_clock",color:A.palette.error.light,fontSize:56,mr:0})]})]})})),Object(f.jsx)(r.a,Object(a.a)(Object(a.a)({item:!0},k),{},{children:Object(f.jsxs)(m,{title:"license.expiredAt30",sx:{height:114,position:"relative"},children:[Object(f.jsx)(l.a,{className:I.rightTop+" abs-position",sx:{borderTopColor:A.palette.warning.light,borderRightColor:A.palette.warning.light}}),Object(f.jsxs)(l.a,{sx:{pl:4,pr:3},className:"flex-between",children:[Object(f.jsx)(b.a,{variant:"h3",children:null===y||void 0===y?void 0:y.oneMonthLaterExpiredNum}),Object(f.jsx)(S.a,{style:{opacity:.2,marginTop:-12},icon:"ic_waiting_clock",color:A.palette.warning.light,fontSize:56,mr:0})]})]})}))]})}))]})}),Object(f.jsx)(L,{afterFileUpload:_})]})]}):Object(f.jsx)(p.a,{to:"/user"})}}}]);